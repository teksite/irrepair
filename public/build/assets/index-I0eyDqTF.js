import{a as H,c as U,t as v,g as P}from"./utils-CXhDygi-.js";function V(L,e,E,l){return L.params.createElements&&Object.keys(l).forEach(r=>{if(!E[r]&&E.auto===!0){let u=H(L.el,`.${l[r]}`)[0];u||(u=U("div",l[r]),u.className=l[r],L.el.append(u)),E[r]=u,e[r]=u}}),E}function z(L){let{swiper:e,extendParams:E,on:l,emit:r}=L;E({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function u(t){let a;return t&&typeof t=="string"&&e.isElement&&(a=e.el.querySelector(t)||e.hostEl.querySelector(t),a)?a:(t&&(typeof t=="string"&&(a=[...document.querySelectorAll(t)]),e.params.uniqueNavElements&&typeof t=="string"&&a&&a.length>1&&e.el.querySelectorAll(t).length===1?a=e.el.querySelector(t):a&&a.length===1&&(a=a[0])),t&&!a?t:a)}function c(t,a){const s=e.params.navigation;t=v(t),t.forEach(n=>{n&&(n.classList[a?"add":"remove"](...s.disabledClass.split(" ")),n.tagName==="BUTTON"&&(n.disabled=a),e.params.watchOverflow&&e.enabled&&n.classList[e.isLocked?"add":"remove"](s.lockClass))})}function f(){const{nextEl:t,prevEl:a}=e.navigation;if(e.params.loop){c(a,!1),c(t,!1);return}c(a,e.isBeginning&&!e.params.rewind),c(t,e.isEnd&&!e.params.rewind)}function C(t){t.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function T(t){t.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function p(){const t=e.params.navigation;if(e.params.navigation=V(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(t.nextEl||t.prevEl))return;let a=u(t.nextEl),s=u(t.prevEl);Object.assign(e.navigation,{nextEl:a,prevEl:s}),a=v(a),s=v(s);const n=(o,b)=>{o&&o.addEventListener("click",b==="next"?T:C),!e.enabled&&o&&o.classList.add(...t.lockClass.split(" "))};a.forEach(o=>n(o,"next")),s.forEach(o=>n(o,"prev"))}function m(){let{nextEl:t,prevEl:a}=e.navigation;t=v(t),a=v(a);const s=(n,o)=>{n.removeEventListener("click",o==="next"?T:C),n.classList.remove(...e.params.navigation.disabledClass.split(" "))};t.forEach(n=>s(n,"next")),a.forEach(n=>s(n,"prev"))}l("init",()=>{e.params.navigation.enabled===!1?w():(p(),f())}),l("toEdge fromEdge lock unlock",()=>{f()}),l("destroy",()=>{m()}),l("enable disable",()=>{let{nextEl:t,prevEl:a}=e.navigation;if(t=v(t),a=v(a),e.enabled){f();return}[...t,...a].filter(s=>!!s).forEach(s=>s.classList.add(e.params.navigation.lockClass))}),l("click",(t,a)=>{let{nextEl:s,prevEl:n}=e.navigation;s=v(s),n=v(n);const o=a.target;let b=n.includes(o)||s.includes(o);if(e.isElement&&!b){const y=a.path||a.composedPath&&a.composedPath();y&&(b=y.find(h=>s.includes(h)||n.includes(h)))}if(e.params.navigation.hideOnClick&&!b){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;let y;s.length?y=s[0].classList.contains(e.params.navigation.hiddenClass):n.length&&(y=n[0].classList.contains(e.params.navigation.hiddenClass)),r(y===!0?"navigationShow":"navigationHide"),[...s,...n].filter(h=>!!h).forEach(h=>h.classList.toggle(e.params.navigation.hiddenClass))}});const S=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),p(),f()},w=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),m()};Object.assign(e.navigation,{enable:S,disable:w,update:f,init:p,destroy:m})}function G(L){let{swiper:e,extendParams:E,on:l,emit:r,params:u}=L;e.autoplay={running:!1,paused:!1,timeLeft:0},E({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,f,C=u&&u.autoplay?u.autoplay.delay:3e3,T=u&&u.autoplay?u.autoplay.delay:3e3,p,m=new Date().getTime(),S,w,t,a,s,n,o;function b(i){!e||e.destroyed||!e.wrapperEl||i.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",b),!(o||i.detail&&i.detail.bySwiperTouchMove)&&x())}const y=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?S=!0:S&&(T=p,S=!1);const i=e.autoplay.paused?p:m+T-new Date().getTime();e.autoplay.timeLeft=i,r("autoplayTimeLeft",i,i/C),f=requestAnimationFrame(()=>{y()})},h=()=>{let i;return e.virtual&&e.params.virtual.enabled?i=e.slides.filter(d=>d.classList.contains("swiper-slide-active"))[0]:i=e.slides[e.activeIndex],i?parseInt(i.getAttribute("data-swiper-autoplay"),10):void 0},M=i=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(f),y();let g=typeof i>"u"?e.params.autoplay.delay:i;C=e.params.autoplay.delay,T=e.params.autoplay.delay;const d=h();!Number.isNaN(d)&&d>0&&typeof i>"u"&&(g=d,C=d,T=d),p=g;const N=e.params.speed,q=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(N,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,N,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(N,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,N,!0,!0),r("autoplay")),e.params.cssMode&&(m=new Date().getTime(),requestAnimationFrame(()=>{M()})))};return g>0?(clearTimeout(c),c=setTimeout(()=>{q()},g)):requestAnimationFrame(()=>{q()}),g},k=()=>{m=new Date().getTime(),e.autoplay.running=!0,M(),r("autoplayStart")},O=()=>{e.autoplay.running=!1,clearTimeout(c),cancelAnimationFrame(f),r("autoplayStop")},D=(i,g)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(c),i||(n=!0);const d=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",b):x()};if(e.autoplay.paused=!0,g){s&&(p=e.params.autoplay.delay),s=!1,d();return}p=(p||e.params.autoplay.delay)-(new Date().getTime()-m),!(e.isEnd&&p<0&&!e.params.loop)&&(p<0&&(p=0),d())},x=()=>{e.isEnd&&p<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(m=new Date().getTime(),n?(n=!1,M(p)):M(),e.autoplay.paused=!1,r("autoplayResume"))},A=()=>{if(e.destroyed||!e.autoplay.running)return;const i=P();i.visibilityState==="hidden"&&(n=!0,D(!0)),i.visibilityState==="visible"&&x()},B=i=>{i.pointerType==="mouse"&&(n=!0,o=!0,!(e.animating||e.autoplay.paused)&&D(!0))},I=i=>{i.pointerType==="mouse"&&(o=!1,e.autoplay.paused&&x())},F=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",B),e.el.addEventListener("pointerleave",I))},j=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",B),e.el.removeEventListener("pointerleave",I))},_=()=>{P().addEventListener("visibilitychange",A)},R=()=>{P().removeEventListener("visibilitychange",A)};l("init",()=>{e.params.autoplay.enabled&&(F(),_(),k())}),l("destroy",()=>{j(),R(),e.autoplay.running&&O()}),l("_freeModeStaticRelease",()=>{(t||n)&&x()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?O():D(!0,!0)}),l("beforeTransitionStart",(i,g,d)=>{e.destroyed||!e.autoplay.running||(d||!e.params.autoplay.disableOnInteraction?D(!0,!0):O())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){O();return}w=!0,t=!1,n=!1,a=setTimeout(()=>{n=!0,t=!0,D(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!w)){if(clearTimeout(a),clearTimeout(c),e.params.autoplay.disableOnInteraction){t=!1,w=!1;return}t&&e.params.cssMode&&x(),t=!1,w=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(s=!0)}),Object.assign(e.autoplay,{start:k,stop:O,pause:D,resume:x})}export{G as Autoplay,z as Navigation};
